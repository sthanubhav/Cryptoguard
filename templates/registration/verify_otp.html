
{% extends 'base/base.html' %}

{% block title %}Login{% endblock %}

{% block content %}

{% load static %}
<div class="login-container">
    <div class="logo-container">
        <!-- Logo -->
        <img src="{% static 'image/logo.png' %}" alt="Logo" class="logo">
    </div>

    <h2>Verify OTP</h2>
    {% if error_message %}
    <div id="error-message" class="alert alert-danger" role="alert">{{ error_message }}</div>
    {% endif %}
    
    <form method="post" id="login-form">
        {% csrf_token %}
        <div class="form-group">
            <label for="otp" class="form-label">Enter OTP:</label>
            <input type="text" class="form-control" id="otp" name="otp" required>
        </div>
        <div class="d-flex justify-content-center align-items-center">
            <button type="submit" class="btn btn-primary btn-login">Login</button>
            <div class="spinner-border text-primary mt-2 d-none" role="status" id="loading-spinner">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </form>
</div>
{% endblock %}

{% block javascripts %}

<script>
document.getElementById('login-form').addEventListener('submit', function (event) {
    // Prevent the default form submission behavior
    event.preventDefault();

    // Show the loading spinner and hide the login button
    document.getElementById('loading-spinner').classList.remove('d-none');
    document.querySelector('.btn-login').classList.add('d-none');

    // Submit the form after a short delay (for demonstration purposes)
    setTimeout(function () {
        document.getElementById('login-form').submit();
    }, 1000); // Adjust the delay as needed or remove it if you don't want a delay
});
</script>

{% endblock javascripts %}
